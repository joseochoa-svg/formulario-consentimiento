<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Consentimiento de Datos Personales | Dra Skin</title>

  <!-- Tipograf√≠a elegante (discreta, tipo hotel lujo) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,400;9..144,500&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Paleta lujo discreto: marfil + carb√≥n + champagne */
      --bg-ivory: #f6f1ea;
      --bg-sand: #efe6dc;
      --ink: #1d1b18;
      --muted: rgba(29, 27, 24, .68);
      --line: rgba(29, 27, 24, .14);
      --champagne: #cbb38a;
      --champagne-2: #b99a6b;
      --card: rgba(255,255,255,.84);
      --shadow: 0 18px 60px rgba(0,0,0,.10);
      --shadow-soft: 0 10px 35px rgba(0,0,0,.08);
      --radius: 22px;
      --ok: #0f8a6a;
      --danger: #c44536;
      --focus: rgba(203,179,138,.35);
    }

    * { box-sizing: border-box; }
    html, body { height: auto; }

    body{
  margin: 0;
  color: var(--ink);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
  background:
    radial-gradient(1200px 700px at 20% 10%, rgba(203,179,138,.18), transparent 55%),
    radial-gradient(900px 600px at 80% 20%, rgba(185,154,107,.14), transparent 55%),
    linear-gradient(135deg, var(--bg-ivory), var(--bg-sand))
        /* ‚úÖ scroll natural */
  min-height: 100svh;     /* m√≥viles modernos */
  padding: 24px;
  display: flex;
  justify-content: center; /* centra horizontal */
  align-items: flex-start; /* ‚úÖ inicia arriba */
}
}

    .container{
      width: min(680px, 100%);
      background: var(--card);
      border: 1px solid rgba(255,255,255,.55);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(22px, 4vw, 44px);
      position: relative;
      overflow: hidden;
    }

    /* Marco sutil tipo ‚Äúpapeler√≠a‚Äù */
    .container:before{
      content: "";
      position: absolute;
      inset: 12px;
      border-radius: calc(var(--radius) - 10px);
      border: 1px solid rgba(203,179,138,.35);
      pointer-events: none;
    }

    .header{
      text-align: center;
      margin-bottom: 22px;
    }

    /* Badge discreto */
    .logo{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 14px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(203,179,138,.32);
      background: rgba(255,255,255,.62);
      box-shadow: var(--shadow-soft);
    }

    /* CLASE SOLO PARA LA IMAGEN (NO REUSAR .logo AQU√ç) */
    .logo-img{
      display: block;
      height: 36px; /* stationery: discreto */
      width: auto;
      max-width: 220px;
    }

    h1{
      font-family: Fraunces, serif;
      font-weight: 400;
      letter-spacing: .2px;
      font-size: clamp(24px, 3.2vw, 34px);
      margin: 0 0 8px;
      color: var(--ink);
    }

    .subtitle{
      margin: 0 auto;
      max-width: 54ch;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.55;
    }

    .microcopy{
      margin-top: 14px;
      display: inline-flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
      color: rgba(29,27,24,.62);
      font-size: 12.5px;
    }
/*
    .micro-dot{
      width: 6px; height: 6px; border-radius: 50%;
      background: rgba(203,179,138,.9);
      box-shadow: 0 0 0 4px rgba(203,179,138,.15);
    }*/

    .progress-container{
      height: 10px;
      border-radius: 999px;
      background: rgba(29,27,24,.06);
      overflow: hidden;
      margin: 24px 0 26px;
      border: 1px solid rgba(29,27,24,.06);
    }

    .progress-bar{
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--champagne), var(--champagne-2));
      transition: width .35s ease;
    }

    .policy-card{
      border: 1px solid rgba(203,179,138,.28);
      background: rgba(255,255,255,.65);
      padding: 14px 16px;
      border-radius: 16px;
      display: flex;
      gap: 12px;
      align-items: flex-start;
      margin-bottom: 22px;
    }

    .policy-icon{
      width: 34px; height: 34px;
      border-radius: 10px;
      display: grid;
      place-items: center;
      background: rgba(203,179,138,.18);
      border: 1px solid rgba(203,179,138,.25);
      flex: 0 0 auto;
    }

    .policy-title{
      font-size: 13px;
      font-weight: 600;
      margin: 0 0 3px;
      color: rgba(29,27,24,.86);
    }

    .policy-text{
      margin: 0;
      font-size: 12.5px;
      color: rgba(29,27,24,.62);
      line-height: 1.45;
    }

    .policy-link a{
      color: rgba(29,27,24,.90);
      text-decoration: none;
      border-bottom: 1px solid rgba(203,179,138,.65);
      padding-bottom: 2px;
    }
    .policy-link a:hover{
      border-bottom-color: rgba(203,179,138,1);
    }

    form{ margin-top: 8px; }
    .grid{ display: grid; gap: 16px; }

    label{
      display: block;
      margin-bottom: 8px;
      font-size: 12px;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: rgba(29,27,24,.70);
      font-weight: 600;
    }

    .field{ position: relative; }

    input, select{
      width: 100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(29,27,24,.14);
      background: rgba(255,255,255,.78);
      color: var(--ink);
      font-size: 15px;
      outline: none;
      transition: box-shadow .2s ease, border-color .2s ease, transform .08s ease;
    }

    input:focus, select:focus{
      border-color: rgba(203,179,138,.9);
      box-shadow: 0 0 0 4px var(--focus);
    }

    .helper{
      margin-top: 8px;
      font-size: 12.5px;
      color: rgba(29,27,24,.56);
      line-height: 1.35;
    }

    .error-message{
      margin-top: 8px;
      font-size: 12.5px;
      color: var(--danger);
      display: none;
    }

    .radio-wrap{
      border: 1px solid rgba(29,27,24,.14);
      background: rgba(255,255,255,.70);
      border-radius: 16px;
      padding: 14px;
    }

    .radio-group{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }

    .radio-option{ position: relative; }

    .radio-option input[type="radio"]{
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .radio-label{
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(29,27,24,.14);
      background: rgba(255,255,255,.78);
      cursor: pointer;
      transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
      font-weight: 600;
      color: rgba(29,27,24,.88);
    }

    .radio-label:hover{
      box-shadow: 0 10px 28px rgba(0,0,0,.08);
      transform: translateY(-1px);
      border-color: rgba(203,179,138,.55);
    }

    .radio-option input[type="radio"]:checked + .radio-label{
      background: linear-gradient(135deg, rgba(203,179,138,.22), rgba(185,154,107,.18));
      border-color: rgba(203,179,138,.95);
      box-shadow: 0 12px 32px rgba(0,0,0,.10);
    }

    .btn{
      margin-top: 18px;
      width: 100%;
      border: none;
      border-radius: 16px;
      padding: 15px 16px;
      cursor: pointer;
      font-weight: 600;
      font-size: 15px;
      letter-spacing: .02em;
      color: #12110f;
      background: linear-gradient(135deg, rgba(203,179,138,1), rgba(185,154,107,1));
      box-shadow: 0 16px 44px rgba(0,0,0,.14);
      transition: transform .15s ease, box-shadow .2s ease, filter .2s ease;
    }

    .btn:hover{
      transform: translateY(-2px);
      filter: brightness(1.02);
      box-shadow: 0 18px 55px rgba(0,0,0,.18);
    }

    .btn:disabled{
      opacity: .65;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .fineprint{
      margin-top: 14px;
      font-size: 12px;
      color: rgba(29,27,24,.58);
      line-height: 1.45;
      text-align: center;
    }

    .fineprint a{
      color: rgba(29,27,24,.86);
      text-decoration: none;
      border-bottom: 1px solid rgba(203,179,138,.65);
      padding-bottom: 2px;
    }

    .success-message{
      display: none;
      margin-top: 20px;
      border-radius: 18px;
      padding: 22px 18px;
      border: 1px solid rgba(203,179,138,.35);
      background: rgba(255,255,255,.72);
      text-align: center;
      box-shadow: var(--shadow-soft);
    }

    .success-title{
      font-family: Fraunces, serif;
      font-weight: 400;
      font-size: 22px;
      margin: 10px 0 6px;
      color: rgba(29,27,24,.92);
    }

    .success-text{
      margin: 0 auto;
      max-width: 54ch;
      color: rgba(29,27,24,.65);
      font-size: 13.5px;
      line-height: 1.55;
    }

    @media (max-width: 640px){
      .radio-group{ grid-template-columns: 1fr; }
      .logo-img{ height: 34px; }
    }
  </style>
</head>

<body>
  <div class="container" role="main" aria-label="Formulario de consentimiento de datos personales">


      </div>

      <!-- Fallback discreto si la imagen falla -->
      <div id="logoFallback" style="display:none; font-family: Fraunces, serif; font-size: 16px; letter-spacing:.10em;">
        DRA SKIN
      </div>

      <h1>Protecci√≥n de Datos Personales</h1>

      <p class="subtitle">
        Gracias por tomarte un momento. Tu informaci√≥n se trata con cuidado y se utiliza √∫nicamente para los fines descritos en nuestra pol√≠tica.
      </p>

      <div class="microcopy" aria-label="Indicador de privacidad">
        <span class="micro-dot" aria-hidden="true"></span>

      </div>
    </header>

    <div class="progress-container" aria-label="Progreso del formulario">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <section class="policy-card" aria-label="Pol√≠tica de tratamiento de datos">
      <div class="policy-icon" aria-hidden="true">üìÑ</div>
      <div class="policy-link">
        <p class="policy-title">Pol√≠tica de tratamiento de datos</p>
        <p class="policy-text">
          Te invitamos a leerla antes de continuar.
          <a href="https://www.draskin.co/pages/politica-de-privacidad-y-tratamiento-de-datos?gad_source=1&gad_campaignid=22584167943&gbraid=0AAAAAqwO-ETnoP01XrMCXFG8HGfwpF0-k&gclid=CjwKCAiAmp3LBhAkEiwAJM2JUAXeTaCoXmgZMzr9iGAcc6PcXZ2W8YoUO8mOl690CbZXCBH--3PeyRoCOjwQAvD_BwE"
             target="_blank" rel="noopener noreferrer">
            Abrir pol√≠tica
          </a>
        </p>
      </div>
    </section>

    <form id="consentForm" novalidate>
      <div class="grid">

        <div class="field">
          <label for="tipoDocumento">Tipo de documento</label>
          <select id="tipoDocumento" name="tipoDocumento" required>
            <option value="">Seleccione‚Ä¶</option>
            <option value="CC">C√©dula de Ciudadan√≠a (CC)</option>
            <option value="TI">Tarjeta de Identidad (TI)</option>
            <option value="CE">C√©dula de Extranjer√≠a (CE)</option>
            <option value="NIT">NIT</option>
            <option value="Pasaporte">Pasaporte</option>
          </select>
          <div class="error-message" id="errorTipoDocumento">Por favor selecciona un tipo de documento.</div>
        </div>

        <div class="field">
          <label for="numeroDocumento">N√∫mero de documento</label>
          <input type="text" id="numeroDocumento" name="numeroDocumento" required inputmode="numeric" autocomplete="off" />
          <div class="helper">Solo n√∫meros, sin puntos ni espacios.</div>
          <div class="error-message" id="errorNumero">Por favor ingresa un n√∫mero de documento v√°lido.</div>
        </div>

        <div class="field">
          <label for="nombre">Nombre completo</label>
          <input type="text" id="nombre" name="nombre" required autocomplete="name" />
          <div class="error-message" id="errorNombre">Por favor ingresa tu nombre.</div>
        </div>

        <div class="field">
          <label for="telefono">Tel√©fono</label>
          <input type="tel" id="telefono" name="telefono" required inputmode="tel" autocomplete="tel" />
          <div class="helper">Incluye indicativo si aplica (ej. +57‚Ä¶).</div>
          <div class="error-message" id="errorTelefono">Por favor ingresa un tel√©fono v√°lido.</div>
        </div>

        <div class="field">
          <label for="email">Correo electr√≥nico</label>
          <input type="email" id="email" name="email" required autocomplete="email" />
          <div class="helper">Ejemplo: nombre@dominio.com</div>
          <div class="error-message" id="errorEmail">Revisa el correo: parece incompleto o tiene un formato inv√°lido.</div>
        </div>

        <div class="field radio-wrap">
          <label>¬øAceptas la pol√≠tica de tratamiento?</label>
          <div class="radio-group" role="radiogroup" aria-label="Decisi√≥n de consentimiento">
            <div class="radio-option">
              <input type="radio" id="acepto" name="decision" value="Acepto" required />
              <label for="acepto" class="radio-label">‚úì Acepto</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="rechazo" name="decision" value="Rechazo" required />
              <label for="rechazo" class="radio-label">‚úï Rechazo</label>
            </div>
          </div>
          <div class="error-message" id="errorDecision">Por favor selecciona una opci√≥n.</div>
        </div>

        <button type="submit" class="btn" id="submitBtn">Confirmar y enviar</button>

        <div class="fineprint">
          Al enviar, confirmas que le√≠ste la pol√≠tica y registras tu decisi√≥n.
          <br>
          <a href="https://www.draskin.co/pages/politica-de-privacidad-y-tratamiento-de-datos?gad_source=1&gad_campaignid=22584167943&gbraid=0AAAAAqwO-ETnoP01XrMCXFG8HGfwpF0-k&gclid=CjwKCAiAmp3LBhAkEiwAJM2JUAXeTaCoXmgZMzr9iGAcc6PcXZ2W8YoUO8mOl690CbZXCBH--3PeyRoCOjwQAvD_BwE"
             target="_blank" rel="noopener noreferrer">
            Ver pol√≠tica completa
          </a>
        </div>

      </div>
    </form>

    <div class="success-message" id="successMessage" aria-live="polite">
      <div class="logo" aria-label="Logo Dra Skin">
        <img id="logoSuccess" alt="Dra Skin" class="logo-img">
      </div>
      <div class="success-title">Gracias. Todo qued√≥ registrado.</div>
      <p class="success-text">
        Hemos guardado tu respuesta de forma segura. Si deseas actualizarla en el futuro, puedes volver a diligenciar este formulario.
      </p>
    </div>
  </div>

  <script>
    const form = document.getElementById('consentForm');
    const progressBar = document.getElementById('progressBar');
    const submitBtn = document.getElementById('submitBtn');
    const successMessage = document.getElementById('successMessage');

    // ‚úÖ LOGO ABSOLUTO (evita problemas de ruta en GitHub Pages)
    const LOGO_URL = 'https://joseochoa-svg.github.io/formulario-consentimiento/assets/logodraskin.png';

    const logoTop = document.getElementById('logoTop');
    const logoSuccess = document.getElementById('logoSuccess');
    const logoFallback = document.getElementById('logoFallback');

    // Cargar logos
    logoTop.src = LOGO_URL;
    logoSuccess.src = LOGO_URL;

    // Fallback si falla la carga del logo superior
    logoTop.onerror = () => {
      logoTop.style.display = 'none';
      logoFallback.style.display = 'block';
    };

    // Tu URL de Apps Script
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxkbsOhh3Gwd4Wc1Vg4wyTNj4TCX1tP7DxqmDKs7Bznd40r_E1UcN7Mq0PkZQMOe_Kp/exec';

    // Campos
    const tipoDocumento = document.getElementById('tipoDocumento');
    const numeroDocumento = document.getElementById('numeroDocumento');
    const nombre = document.getElementById('nombre');
    const telefono = document.getElementById('telefono');
    const emailInput = document.getElementById('email');

    // Errores
    const errorTipoDocumento = document.getElementById('errorTipoDocumento');
    const errorNumero = document.getElementById('errorNumero');
    const errorNombre = document.getElementById('errorNombre');
    const errorTelefono = document.getElementById('errorTelefono');
    const errorEmail = document.getElementById('errorEmail');
    const errorDecision = document.getElementById('errorDecision');

    function isValidEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[A-Za-z]{2,}$/;
      return re.test(String(email).trim());
    }

    function showError(el, show) {
      el.style.display = show ? 'block' : 'none';
    }

    function markInvalid(inputEl, invalid) {
      if (invalid) {
        inputEl.style.borderColor = 'rgba(196,69,54,.75)';
        inputEl.style.boxShadow = '0 0 0 4px rgba(196,69,54,.15)';
      } else {
        inputEl.style.borderColor = 'rgba(29,27,24,.14)';
        inputEl.style.boxShadow = 'none';
      }
    }

    function updateProgress() {
      const totalFields = 6;
      let filled = 0;

      if (tipoDocumento.value) filled++;
      if (numeroDocumento.value.trim()) filled++;
      if (nombre.value.trim()) filled++;
      if (telefono.value.trim()) filled++;
      if (emailInput.value.trim()) filled++;
      if (document.querySelector('input[name="decision"]:checked')) filled++;

      const progress = (filled / totalFields) * 100;
      progressBar.style.width = progress + '%';
    }

    form.querySelectorAll('input, select').forEach(el => {
      el.addEventListener('input', updateProgress);
      el.addEventListener('change', updateProgress);
    });

    // Blur validations
    tipoDocumento.addEventListener('blur', () => {
      const invalid = !tipoDocumento.value;
      showError(errorTipoDocumento, invalid);
      markInvalid(tipoDocumento, invalid);
    });

    numeroDocumento.addEventListener('blur', () => {
      const val = numeroDocumento.value.trim();
      const invalid = !val || !/^\d{5,}$/.test(val);
      showError(errorNumero, invalid);
      markInvalid(numeroDocumento, invalid);
    });

    nombre.addEventListener('blur', () => {
      const invalid = !nombre.value.trim();
      showError(errorNombre, invalid);
      markInvalid(nombre, invalid);
    });

    telefono.addEventListener('blur', () => {
      const val = telefono.value.trim();
      const digits = val.replace(/\D/g, '');
      const invalid = !val || digits.length < 7;
      showError(errorTelefono, invalid);
      markInvalid(telefono, invalid);
    });

    emailInput.addEventListener('blur', () => {
      const invalid = !isValidEmail(emailInput.value);
      showError(errorEmail, invalid);
      markInvalid(emailInput, invalid);
    });

    function validateAll() {
      let ok = true;

      const invTipo = !tipoDocumento.value;
      showError(errorTipoDocumento, invTipo);
      markInvalid(tipoDocumento, invTipo);
      if (invTipo) ok = false;

      const docVal = numeroDocumento.value.trim();
      const invDoc = !docVal || !/^\d{5,}$/.test(docVal);
      showError(errorNumero, invDoc);
      markInvalid(numeroDocumento, invDoc);
      if (invDoc) ok = false;

      const invNombre = !nombre.value.trim();
      showError(errorNombre, invNombre);
      markInvalid(nombre, invNombre);
      if (invNombre) ok = false;

      const telVal = telefono.value.trim();
      const telDigits = telVal.replace(/\D/g, '');
      const invTel = !telVal || telDigits.length < 7;
      showError(errorTelefono, invTel);
      markInvalid(telefono, invTel);
      if (invTel) ok = false;

      const invEmail = !isValidEmail(emailInput.value);
      showError(errorEmail, invEmail);
      markInvalid(emailInput, invEmail);
      if (invEmail) ok = false;

      const decisionChecked = document.querySelector('input[name="decision"]:checked');
      const invDecision = !decisionChecked;
      showError(errorDecision, invDecision);
      if (invDecision) ok = false;

      return ok;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      if (!validateAll()) {
        const firstError = document.querySelector('.error-message[style*="block"]');
        if (firstError) {
          const field = firstError.closest('.field')?.querySelector('input, select');
          if (field) field.focus();
        }
        return;
      }

      submitBtn.disabled = true;
      submitBtn.textContent = 'Enviando‚Ä¶';

      const decision = document.querySelector('input[name="decision"]:checked').value;

      const payload = {
        tipoDocumento: tipoDocumento.value,
        numeroDocumento: numeroDocumento.value.trim(),
        nombre: nombre.value.trim(),
        telefono: telefono.value.trim(),
        email: emailInput.value.trim(),
        decision
      };

      try {
        await fetch(SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        });

        form.style.display = 'none';
        successMessage.style.display = 'block';

      } catch (err) {
        alert('No pudimos completar el env√≠o en este momento. Por favor intenta nuevamente.');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Confirmar y enviar';
      }
    });

    updateProgress();
  </script>
</body>
</html>
